<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MYSIS Wallet Debug</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      height: 100vh;
    }

    .btn {
      padding: 10px 20px;
      background-color: #facc15;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      color: #000;
      cursor: pointer;
      margin-top: 20px;
    }

    .btn:hover {
      background-color: #fcd34d;
    }
  </style>
</head>
<body>
  <h2 id="status">🔌 Not connected</h2>
  <button class="btn" id="connectBtn">Connect Wallet</button>

  <script>
    window.onload = () => {
      const status = document.getElementById("status");
      const connectBtn = document.getElementById("connectBtn");

      connectBtn.onclick = async () => {
        console.log("🛠 Connect button clicked.");

        if (window.ethereum) {
          console.log("✅ window.ethereum detected.");

          try {
            const provider = new ethers.providers.Web3Provider(window.ethereum);
            console.log("🧠 Provider created:", provider);

            await provider.send("eth_requestAccounts", []);
            console.log("📡 Accounts requested.");

            const signer = provider.getSigner();
            const address = await signer.getAddress();
            console.log("👛 Address fetched:", address);

            status.innerText = `✅ Connected: ${address}`;
          } catch (err) {
            console.error("❌ Connection error:", err);
            status.innerText = "❌ Connection failed";
          }

        } else {
          console.warn("🛑 MetaMask not found.");
          status.innerText = "🛑 MetaMask not found";
        }
      };
    };
  </script>
</body>
</html>
